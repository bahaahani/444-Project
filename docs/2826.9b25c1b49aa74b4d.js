"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2826],{2826:(N,f,c)=>{c.r(f),c.d(f,{ShowroomPageModule:()=>k});var d=c(6895),m=c(433),r=c(4556),u=c(3128),g=c(655),s=c(3562),p=c(9996),C=c(4633),S=c(8714),t=c(8256),w=c(8427);let P=(()=>{class i{transform(e,o){if(null!=e)return o.type&&(e=e.filter(n=>n.type==o.type)),o.maxMileage&&(e=e.filter(n=>n.mileage<=o.maxMileage)),o.numberOfSeats&&(e=e.filter(n=>n.numberOfSeats>=o.numberOfSeats)),o.maxPrice&&(e=e.filter(n=>n.price<=o.maxPrice)),o.status&&(e=e.filter(n=>n.status==o.status)),e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"filterCar",type:i,pure:!0,standalone:!0}),i})();function T(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"ion-fab",15)(1,"ion-fab-button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addnewcar())}),t._UZ(2,"ion-icon",17),t.qZA()()}}function b(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2,"Status: "),t.qZA(),t.TgZ(3,"ion-select",6),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.filterParam.status=n)})("ionChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.filter())}),t.TgZ(4,"ion-select-option",18),t._uU(5,"Available"),t.qZA(),t.TgZ(6,"ion-select-option",19),t._uU(7,"Sold"),t.qZA(),t.TgZ(8,"ion-select-option",20),t._uU(9,"History"),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.filterParam.status)}}function x(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"ion-buttons")(1,"ion-button",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.deleteCar(n))}),t._UZ(2,"ion-icon",32),t._uU(3,"Delete "),t.qZA(),t.TgZ(4,"ion-button",33),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.openEdit(n))}),t._UZ(5,"ion-icon",34),t._uU(6,"Edit "),t.qZA()()}}const Z=function(){return["/viewcar"]};function M(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"ion-card")(1,"ion-card-header",22)(2,"img",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.dataSrv.selectedCarId=a.id)}),t.qZA(),t.TgZ(3,"ion-card-title",24),t._uU(4),t.qZA(),t.TgZ(5,"ion-card-subtitle",24),t._uU(6),t.qZA()(),t.TgZ(7,"ion-card-content")(8,"ion-card-subtitle",25),t._uU(9),t.qZA(),t.TgZ(10,"ion-card-subtitle",25),t._uU(11),t.qZA(),t.TgZ(12,"ion-card-subtitle",25),t._uU(13),t.qZA()(),t.YNc(14,x,7,0,"ion-buttons",11),t.TgZ(15,"ion-buttons")(16,"ion-button",26),t.NdJ("click",function(){const a=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.dataSrv.selectedCarId=a.id)}),t._UZ(17,"ion-icon",27),t.qZA(),t.TgZ(18,"ion-button",28,29),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(19),a=t.oxw(2);return t.KtG(a.animatebutton(n))})("click",function(){const a=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.dataSrv.addToFavorite(a))}),t._UZ(20,"ion-icon",4),t._uU(21,"Favorite "),t.qZA(),t.TgZ(22,"ion-button",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit,_=t.oxw(2);return _.selected_car=a,t.KtG(_.selectDate())}),t._UZ(23,"ion-icon",30),t._uU(24,"Test Drive "),t.qZA()()()}if(2&i){const e=l.$implicit,o=t.oxw(2);t.xp6(2),t.s9C("src",e.image,t.LSH),t.Q6J("routerLink",t.DdM(9,Z)),t.xp6(2),t.Oqu(e.model),t.xp6(2),t.Oqu(e.type),t.xp6(3),t.hij("Color: ",e.color,""),t.xp6(2),t.hij("Mileage: ",e.mileage,""),t.xp6(2),t.hij("Price: ",e.price,""),t.xp6(1),t.Q6J("ngIf",o.admin),t.xp6(2),t.Q6J("routerLink",t.DdM(10,Z))}}function v(i,l){if(1&i&&(t.TgZ(0,"ion-list"),t.YNc(1,M,25,11,"ion-card",21),t.ALo(2,"filterCar"),t.ALo(3,"async"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.lcZ(3,4,e.cars),e.filterParam))}}function y(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"ion-datetime",35),t.NdJ("ionChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.requestTestDrive(n))}),t.qZA()}2&i&&t.Q6J("showDefaultButtons",!0)}const A=function(){return["/tabs/tab1"]},J=[{path:"",component:(()=>{class i{constructor(e,o,n,a){this.dataSrv=e,this.route=o,this.alertCtrl=n,this.modalCtrl=a,this.admin=this.dataSrv.admin,this.Usr="View",this.testDriveDate=new Date,this.filterParam={},this.testDriveDateModal={},this.selected_car={},this.shoowid=this.route.snapshot.paramMap.get("id"),this.cars=(0,s.BS)((0,s.IO)(this.dataSrv.carCollection,this.admin?(0,s.ar)("showroom","==",this.shoowid):(0,p.xD)((0,s.ar)("showroom","==",this.shoowid),(0,s.ar)("status","==","available"))),{idField:"id"})}animatebutton(e){dynamics.animate(e.el,{scaleX:.9},{type:dynamics.bounce,duration:1e3,bounciness:0,complete:()=>{null!=e.el&&(e.el.style.color="red")}})}filter(){this.filterParam=JSON.parse(JSON.stringify(this.filterParam))}selectDate(){this.testDriveDateModal.present()}requestTestDrive(e){return(0,g.mG)(this,void 0,void 0,function*(){let o=this.dataSrv.getUid();const n=new Date(e.detail.value);if((yield(0,p.Yp)((0,s.IO)(this.dataSrv.testDriveCollection,(0,s.ar)("user","==",o)))).data().count>=3)return void(yield(yield this.alertCtrl.create({header:"Error",message:"Maximum number of test drives is 3",buttons:["Dismiss"]})).present());const _=[];(yield(0,s.PL)((0,s.IO)(this.dataSrv.testDriveCollection,(0,s.ar)("car","==",this.selected_car.id)))).forEach(h=>_.push(h.data().date.toDate().toDateString()));const D=n.toDateString();if(_.includes(D))return void(yield(yield this.alertCtrl.create({header:"Error",message:"Car already booked on that day",buttons:["Dismiss"]})).present());let q={car:this.selected_car.id,user:o,carModel:this.selected_car.model,status:"pending",date:n};(0,s.pl)((0,s.JU)(this.dataSrv.testDriveCollection),q),yield(yield this.alertCtrl.create({header:"Success",message:"Car booked successfully",buttons:["OK"]})).present()})}deleteCar(e){this.dataSrv.deleteCar(e.id)}openEdit(e){return(0,g.mG)(this,void 0,void 0,function*(){return(yield this.modalCtrl.create({component:S.e,componentProps:{id:e.id}})).present()})}addnewcar(){return(0,g.mG)(this,void 0,void 0,function*(){(yield this.modalCtrl.create({component:C.C,componentProps:{id:this.shoowid}})).present()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w.Z),t.Y36(u.gz),t.Y36(r.Br),t.Y36(r.IN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-showroom"]],viewQuery:function(e,o){if(1&e&&t.Gf(r.ki,5),2&e){let n;t.iGM(n=t.CRH())&&(o.testDriveDateModal=n.first)}},decls:41,vars:10,consts:[["slot","start","routerDirection","back","fill","clear",3,"routerLink"],["name","arrow-back"],[1,"ion-text-center"],["color","danger","slot","end","routerLink","/fav"],["name","heart"],["vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],[3,"ngModel","ngModelChange","ionChange"],["value","Sedan"],["value","SUV"],["value","Hatchback"],["value","Sports"],[4,"ngIf"],["type","number",3,"ngModel","ngModelChange","ionChange"],["expand","block",3,"click"],[3,"cssClass"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],["value","available"],["value","sold"],["value","history"],[4,"ngFor","ngForOf"],[1,"ion-padding"],[2,"width","100%",3,"routerLink","src","click"],[1,"ion-no-padding"],[1,"animatebutton",2,"font-weight","bold"],["fill","clear",3,"routerLink","click"],["name","arrow-forward"],[1,"animatebutton",3,"click"],["ref",""],["name","share"],["color","danger",3,"click"],["name","close-circle"],["color","success",3,"click"],["name","pencil"],["presentation","date","size","cover",3,"showDefaultButtons","ionChange"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-button",0),t._UZ(3,"ion-icon",1),t.qZA(),t.TgZ(4,"ion-title",2),t._uU(5,"Cars"),t.qZA(),t.TgZ(6,"ion-button",3),t._UZ(7,"ion-icon",4),t.qZA()()(),t.TgZ(8,"ion-content"),t.YNc(9,T,3,0,"ion-fab",5),t.TgZ(10,"ion-list")(11,"ion-item")(12,"ion-label"),t._uU(13,"Type: "),t.qZA(),t.TgZ(14,"ion-select",6),t.NdJ("ngModelChange",function(a){return o.filterParam.type=a})("ionChange",function(){return o.filter()}),t.TgZ(15,"ion-select-option",7),t._uU(16,"Sedan"),t.qZA(),t.TgZ(17,"ion-select-option",8),t._uU(18,"SUV"),t.qZA(),t.TgZ(19,"ion-select-option",9),t._uU(20,"Hatchback"),t.qZA(),t.TgZ(21,"ion-select-option",10),t._uU(22,"Sports"),t.qZA()()(),t.YNc(23,b,10,1,"ion-item",11),t.TgZ(24,"ion-item")(25,"ion-label"),t._uU(26,"Max Mileage: "),t.qZA(),t.TgZ(27,"ion-input",12),t.NdJ("ngModelChange",function(a){return o.filterParam.maxMileage=a})("ionChange",function(){return o.filter()}),t.qZA()(),t.TgZ(28,"ion-item")(29,"ion-label"),t._uU(30,"Number of Seats"),t.qZA(),t.TgZ(31,"ion-input",12),t.NdJ("ngModelChange",function(a){return o.filterParam.numberOfSeats=a})("ionChange",function(){return o.filter()}),t.qZA()(),t.TgZ(32,"ion-item")(33,"ion-label"),t._uU(34,"Max Price: "),t.qZA(),t.TgZ(35,"ion-input",12),t.NdJ("ngModelChange",function(a){return o.filterParam.maxPrice=a})("ionChange",function(){return o.filter()}),t.qZA()()(),t.TgZ(36,"ion-button",13),t.NdJ("click",function(){return o.filterParam={}}),t._uU(37,"Reset"),t.qZA(),t.YNc(38,v,4,6,"ion-list",11),t.TgZ(39,"ion-modal",14),t.YNc(40,y,1,1,"ng-template"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("routerLink",t.DdM(9,A)),t.xp6(7),t.Q6J("ngIf",o.admin),t.xp6(5),t.Q6J("ngModel",o.filterParam.type),t.xp6(9),t.Q6J("ngIf",o.admin),t.xp6(4),t.Q6J("ngModel",o.filterParam.maxMileage),t.xp6(4),t.Q6J("ngModel",o.filterParam.numberOfSeats),t.xp6(4),t.Q6J("ngModel",o.filterParam.maxPrice),t.xp6(3),t.Q6J("ngIf",null!=o.filterParam&&o.filterParam==o.filterParam),t.xp6(1),t.Q6J("cssClass","bottom-end"))},dependencies:[d.sg,d.O5,m.JJ,m.On,r.YG,r.Sm,r.PM,r.FN,r.Zi,r.tO,r.Dq,r.W2,r.x4,r.IJ,r.W4,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.q_,r.t9,r.n0,r.wd,r.sr,r.ki,r.as,r.QI,r.YI,u.rH,d.Ov,P]}),i})()}];let U=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(J),u.Bz]}),i})(),k=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,m.u5,r.Pc,U]}),i})()}}]);